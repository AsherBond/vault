<Hds::AppFrame @hasSidebar={{@showSidebar}} @hasHeader={{false}} @hasFooter={{false}} as |Frame|>
  <Frame.Sidebar data-test-sidebar-nav>
    <Hds::SideNav>
      <:header>
        <Hds::SideNav::Header>
          <:logo>
            <Hds::SideNav::Header::HomeLink @icon="vault" @route="docs" @ariaLabel="docs home" />
          </:logo>
        </Hds::SideNav::Header>
      </:header>
      <:body>
        <Hds::SideNav::List as |Nav|>
          <Nav.BackLink @text="Back to work" @route="vault" />
          <DocfyOutput @scope="docs" as |node|>
            <Nav.Title>
              Components
            </Nav.Title>
            {{#let (find-by "name" "components" node.children) as |component|}}
              <Nav.Item>
                <ZDocfy @components={{component.pages}} />
              </Nav.Item>
            {{/let}}

            <Nav.Title>Contributing docs</Nav.Title>
            {{#each node.pages as |page|}}
              <Nav.Item>
                <DocfyLink @to={{page.url}} class="hds-side-nav__list-item-link">
                  {{page.title}}
                </DocfyLink>
              </Nav.Item>
            {{/each}}

            {{! Any other directories within docs/ (aside from 'components') }}
            {{#each node.children as |child|}}
              {{#if (not-eq child.name "components")}}
                <Nav.Title>
                  {{capitalize child.label}}
                </Nav.Title>

                {{#each child.pages as |page|}}
                  <Nav.Item>
                    <DocfyLink @to={{page.url}} class="hds-side-nav__list-item-link">
                      {{page.title}}
                    </DocfyLink>
                  </Nav.Item>
                {{/each}}
              {{/if}}
            {{/each}}
          </DocfyOutput>
        </Hds::SideNav::List>
      </:body>
    </Hds::SideNav>
  </Frame.Sidebar>

  <Frame.Main id="docfy-content">
    {{outlet}}
  </Frame.Main>
</Hds::AppFrame>